---
import Layout from '../layouts/Layout.astro';
import {
  education,
  awards,
  serviceActivities,
  development,
  memberships,
  mentoringText,
} from '../content/cv';
---

<Layout title="CV - Miles Cochran-Branson">
    <div class="container">
        <main>
            <div class="cv-header">
                <h1>Curriculum Vitae</h1>
                <a href="/content/documents/cv.pdf" target="_blank" class="pdf-button" aria-label="Download Full CV (PDF)">
                    <i class="fas fa-file-pdf"></i>
                </a>
            </div>

            <section class="cv-section">
                <h2 id="education">Education</h2>
                
                {education.map((entry) => (
                    <div class="cv-entry">
                        <div class="cv-entry-header">
                            <div class="cv-entry-title">
                                <strong>{entry.degree}</strong>
                            </div>
                            <div class="cv-entry-date">{entry.dateRange}</div>
                        </div>
                        <div class="cv-entry-institution">{entry.institution}</div>
                        <div class="cv-entry-location">{entry.location}</div>
                        {entry.advisors && <div class="cv-entry-advisors">{entry.advisors}</div>}
                        <ul class="cv-entry-details">
                            {entry.details.map((detail) => (
                                <li>{detail}</li>
                            ))}
                        </ul>
                    </div>
                ))}
            </section>

            <section class="cv-section">
                <h2 id="awards">Awards and Fellowships</h2>
                
                {Array.from(new Set(awards.map((a) => a.year)))
                    .sort((a, b) => b - a)
                    .map((year) => (
                        <>
                            <h3 class="cv-subsection">{year}</h3>
                            {awards
                                .filter((a) => a.year === year)
                                .map((award) => (
                                    <div class="cv-award">
                                        <div class="cv-award-title">{award.title}</div>
                                        <div class="cv-award-org">
                                            {award.organization}
                                            {award.amount && ` â€¢ ${award.amount}`}
                                        </div>
                                    </div>
                                ))}
                        </>
                    ))}
            </section>

            <section class="cv-section">
                <h2 id="outreach">Outreach & Professional Development</h2>
                
                <h3 class="cv-subsection">Service and Outreach</h3>

                {serviceActivities.map((activity) => (
                    <div class="cv-activity">
                        {activity.link ? (
                            <a href={activity.link} target="_blank" class="cv-activity-link">
                                <div class="cv-activity-header">
                                    <div class="cv-activity-title">{activity.title}</div>
                                    <div class="cv-activity-date">{activity.date}</div>
                                </div>
                                <div class="cv-activity-desc">{activity.description}</div>
                            </a>
                        ) : (
                            <>
                                <div class="cv-activity-header">
                                    <div class="cv-activity-title">{activity.title}</div>
                                    <div class="cv-activity-date">{activity.date}</div>
                                </div>
                                <div class="cv-activity-desc">{activity.description}</div>
                            </>
                        )}
                    </div>
                ))}

                <h3 class="cv-subsection">Development</h3>
                
                {development.map((item) => (
                    <div class="cv-development">
                        <a href={item.link} target="_blank" class="cv-development-link">
                            <strong>{item.title}.</strong> <em>{item.institution}, {item.date}</em>. {item.description}
                        </a>
                    </div>
                ))}

                <h3 class="cv-subsection">Mentoring</h3>
                
                <div class="cv-text">
                    {mentoringText}
                </div>

                <h3 class="cv-subsection">Memberships</h3>
                
                <div class="cv-memberships">
                    {memberships.map((member) => (
                        <div>{member.name}</div>
                    ))}
                </div>
            </section>
        </main>
    </div>
</Layout>
